# This is the main Samba configuration file. You should read the
# smb.conf(5) manual page in order to understand the options listed
# here. Samba has a huge number of configurable options (perhaps too
# many!) most of which are not shown in this example
#
# For a step to step guide on installing, configuring and using samba,
# read the Samba-HOWTO-Collection. This may be obtained from:
#  http://www.samba.org/samba/docs/Samba-HOWTO-Collection.pdf
#
# Many working examples of smb.conf files can be found in the
# Samba-Guide which is generated daily and can be downloaded from:
#  http://www.samba.org/samba/docs/Samba-Guide.pdf
#
# Any line which starts with a ; (semi-colon) or a # (hash)
# is a comment and is ignored. In this example we will use a #
# for commentry and a ; for parts of the config file that you
# may wish to enable
#
# NOTE: Whenever you modify this file you should run the command "testparm"
# to check that you have not made any basic syntactic errors.
#
#======================= Global Settings =====================================
[global]

   workgroup = WORKGROUP
   server string = NASBengalFox
   server role = standalone server
   log file = /usr/local/samba/var/log.%m
   max log size = 50
   dns proxy = no

   vfs objects = fruit streams_xattr io_uring
   #aio_pthread
   min protocol = SMB3_11

   aio read size = 1
   aio write size = 1
   read raw = true
   write raw = true
   use sendfile = true

   strict locking = No

   guest account = share
   map to guest = Bad User

   fruit:metadata = stream
   fruit:model = MacSamba
   fruit:posix_rename = yes
   fruit:veto_appledouble = yes
   fruit:wipe_intentionally_left_blank_rfork = yes
   fruit:delete_empty_adfiles = yes
   fruit:zero_file_id = yes

#============================ Share Definitions ==============================
[homes]
   comment = Home Directories
   browseable = no
   guest ok = no
   writable = yes
   veto files = /.*/
   delete veto files = yes
   create mask = 0600
   directory mask = 0700

[share]
   comment = NAS
   path = /mnt/nas
   browsable = yes
   guest ok = yes
   read only = yes
   write list = doridian wizzy
   printable = no
   force create mode = 0664
   force directory mode = 2775
   veto files = /.*/
   delete veto files = yes

[timemachine]
   path = /mnt/timemachine/%u
   browsable = yes
   guest ok = no
   writable = yes
   printable = no
   create mask = 0600
   directory mask = 0700
   spotlight = no
   vfs objects = catia fruit streams_xattr
   fruit:aapl = yes
   fruit:time machine = yes
   fruit:time machine max size = 4096G
   durable handles = yes
   kernel oplocks = no
   kernel share modes = no
   posix locking = no
   case sensitive = true
   default case = lower
   preserve case = no
   short preserve case = no
